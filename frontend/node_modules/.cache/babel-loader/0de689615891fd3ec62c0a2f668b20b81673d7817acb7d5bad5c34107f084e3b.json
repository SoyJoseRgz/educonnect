{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,CircularProgress,Typography,Backdrop,LinearProgress,Fade,keyframes}from'@mui/material';import{Wifi as WifiIcon}from'@mui/icons-material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const pulseAnimation=keyframes`\n  0% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.1);\n    opacity: 0.7;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n`;const dotsAnimation=keyframes`\n  0%, 20% {\n    color: transparent;\n    text-shadow: 0.25em 0 0 transparent, 0.5em 0 0 transparent;\n  }\n  40% {\n    color: currentColor;\n    text-shadow: 0.25em 0 0 transparent, 0.5em 0 0 transparent;\n  }\n  60% {\n    text-shadow: 0.25em 0 0 currentColor, 0.5em 0 0 transparent;\n  }\n  80%, 100% {\n    text-shadow: 0.25em 0 0 currentColor, 0.5em 0 0 currentColor;\n  }\n`;const LoadingSpinner=_ref=>{let{message='Cargando...',size=40,overlay=false,color='primary',variant='circular',showProgress=false,progress=0,timeout=10000,// 10 seconds\nonTimeout}=_ref;const[showTimeoutMessage,setShowTimeoutMessage]=useState(false);const[elapsedTime,setElapsedTime]=useState(0);useEffect(()=>{const startTime=Date.now();const timer=setInterval(()=>{const elapsed=Date.now()-startTime;setElapsedTime(elapsed);if(elapsed>=timeout){setShowTimeoutMessage(true);if(onTimeout){onTimeout();}}},1000);return()=>clearInterval(timer);},[timeout,onTimeout]);const formatElapsedTime=ms=>{const seconds=Math.floor(ms/1000);if(seconds<60)return`${seconds}s`;const minutes=Math.floor(seconds/60);return`${minutes}m ${seconds%60}s`;};const renderSpinner=()=>{switch(variant){case'linear':return/*#__PURE__*/_jsxs(Box,{sx:{width:'100%',maxWidth:300},children:[/*#__PURE__*/_jsx(LinearProgress,{color:color,variant:showProgress?'determinate':'indeterminate',value:showProgress?progress:undefined,sx:{height:6,borderRadius:3}}),showProgress&&/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{mt:1,textAlign:'center',display:'block'},children:[Math.round(progress),\"%\"]})]});case'dots':return/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{fontFamily:'monospace',animation:`${dotsAnimation} 1.4s infinite ease-in-out`,color:color==='primary'?'primary.main':color==='secondary'?'secondary.main':'inherit'},children:\"\\u2022\\u2022\\u2022\"});default:return/*#__PURE__*/_jsx(CircularProgress,{size:size,color:color,variant:showProgress?'determinate':'indeterminate',value:showProgress?progress:undefined,sx:{animation:showTimeoutMessage?`${pulseAnimation} 2s infinite`:undefined}});}};const spinnerContent=/*#__PURE__*/_jsx(Fade,{in:true,timeout:300,children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",gap:2,p:2,sx:{minWidth:variant==='linear'?320:'auto'},children:[renderSpinner(),message&&/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",textAlign:\"center\",sx:{maxWidth:300},children:message}),showProgress&&variant==='circular'&&/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"text.secondary\",children:[Math.round(progress),\"% completado\"]}),elapsedTime>3000&&/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{opacity:0.7},children:[\"Tiempo transcurrido: \",formatElapsedTime(elapsedTime)]}),showTimeoutMessage&&/*#__PURE__*/_jsx(Fade,{in:true,children:/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center',p:2,backgroundColor:'warning.light',borderRadius:1,maxWidth:300},children:[/*#__PURE__*/_jsx(WifiIcon,{sx:{color:'warning.dark',mb:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"warning.dark\",display:\"block\",children:\"La operaci\\xF3n est\\xE1 tardando m\\xE1s de lo esperado.\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"warning.dark\",display:\"block\",children:\"Verifica tu conexi\\xF3n a internet.\"})]})})]})});if(overlay){return/*#__PURE__*/_jsx(Backdrop,{sx:{color:'#fff',zIndex:theme=>theme.zIndex.drawer+1,backgroundColor:'rgba(0, 0, 0, 0.5)',backdropFilter:'blur(2px)'},open:true,children:spinnerContent});}return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"200px\",width:\"100%\",children:spinnerContent});};export default LoadingSpinner;","map":{"version":3,"names":["React","useState","useEffect","Box","CircularProgress","Typography","Backdrop","LinearProgress","Fade","keyframes","Wifi","WifiIcon","jsx","_jsx","jsxs","_jsxs","pulseAnimation","dotsAnimation","LoadingSpinner","_ref","message","size","overlay","color","variant","showProgress","progress","timeout","onTimeout","showTimeoutMessage","setShowTimeoutMessage","elapsedTime","setElapsedTime","startTime","Date","now","timer","setInterval","elapsed","clearInterval","formatElapsedTime","ms","seconds","Math","floor","minutes","renderSpinner","sx","width","maxWidth","children","value","undefined","height","borderRadius","mt","textAlign","display","round","fontFamily","animation","spinnerContent","in","flexDirection","alignItems","justifyContent","gap","p","minWidth","opacity","backgroundColor","mb","zIndex","theme","drawer","backdropFilter","open","minHeight"],"sources":["/home/joserodriguez/educonnect/frontend/src/components/LoadingSpinner.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  CircularProgress,\n  Typography,\n  Backdrop,\n  LinearProgress,\n  Fade,\n  keyframes,\n} from '@mui/material';\nimport { Wifi as WifiIcon } from '@mui/icons-material';\n\ninterface LoadingSpinnerProps {\n  message?: string;\n  size?: number;\n  overlay?: boolean;\n  color?: 'primary' | 'secondary' | 'inherit';\n  variant?: 'circular' | 'linear' | 'dots';\n  showProgress?: boolean;\n  progress?: number; // 0-100\n  timeout?: number; // Show timeout message after this many ms\n  onTimeout?: () => void;\n}\n\nconst pulseAnimation = keyframes`\n  0% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.1);\n    opacity: 0.7;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n`;\n\nconst dotsAnimation = keyframes`\n  0%, 20% {\n    color: transparent;\n    text-shadow: 0.25em 0 0 transparent, 0.5em 0 0 transparent;\n  }\n  40% {\n    color: currentColor;\n    text-shadow: 0.25em 0 0 transparent, 0.5em 0 0 transparent;\n  }\n  60% {\n    text-shadow: 0.25em 0 0 currentColor, 0.5em 0 0 transparent;\n  }\n  80%, 100% {\n    text-shadow: 0.25em 0 0 currentColor, 0.5em 0 0 currentColor;\n  }\n`;\n\nconst LoadingSpinner: React.FC<LoadingSpinnerProps> = ({\n  message = 'Cargando...',\n  size = 40,\n  overlay = false,\n  color = 'primary',\n  variant = 'circular',\n  showProgress = false,\n  progress = 0,\n  timeout = 10000, // 10 seconds\n  onTimeout\n}) => {\n  const [showTimeoutMessage, setShowTimeoutMessage] = useState(false);\n  const [elapsedTime, setElapsedTime] = useState(0);\n\n  useEffect(() => {\n    const startTime = Date.now();\n    \n    const timer = setInterval(() => {\n      const elapsed = Date.now() - startTime;\n      setElapsedTime(elapsed);\n      \n      if (elapsed >= timeout) {\n        setShowTimeoutMessage(true);\n        if (onTimeout) {\n          onTimeout();\n        }\n      }\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [timeout, onTimeout]);\n\n  const formatElapsedTime = (ms: number): string => {\n    const seconds = Math.floor(ms / 1000);\n    if (seconds < 60) return `${seconds}s`;\n    const minutes = Math.floor(seconds / 60);\n    return `${minutes}m ${seconds % 60}s`;\n  };\n\n  const renderSpinner = () => {\n    switch (variant) {\n      case 'linear':\n        return (\n          <Box sx={{ width: '100%', maxWidth: 300 }}>\n            <LinearProgress \n              color={color} \n              variant={showProgress ? 'determinate' : 'indeterminate'}\n              value={showProgress ? progress : undefined}\n              sx={{ height: 6, borderRadius: 3 }}\n            />\n            {showProgress && (\n              <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 1, textAlign: 'center', display: 'block' }}>\n                {Math.round(progress)}%\n              </Typography>\n            )}\n          </Box>\n        );\n      \n      case 'dots':\n        return (\n          <Typography\n            variant=\"h4\"\n            sx={{\n              fontFamily: 'monospace',\n              animation: `${dotsAnimation} 1.4s infinite ease-in-out`,\n              color: color === 'primary' ? 'primary.main' : color === 'secondary' ? 'secondary.main' : 'inherit'\n            }}\n          >\n            •••\n          </Typography>\n        );\n      \n      default:\n        return (\n          <CircularProgress \n            size={size} \n            color={color}\n            variant={showProgress ? 'determinate' : 'indeterminate'}\n            value={showProgress ? progress : undefined}\n            sx={{\n              animation: showTimeoutMessage ? `${pulseAnimation} 2s infinite` : undefined\n            }}\n          />\n        );\n    }\n  };\n\n  const spinnerContent = (\n    <Fade in={true} timeout={300}>\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        gap={2}\n        p={2}\n        sx={{\n          minWidth: variant === 'linear' ? 320 : 'auto'\n        }}\n      >\n        {renderSpinner()}\n        \n        {message && (\n          <Typography \n            variant=\"body2\" \n            color=\"text.secondary\" \n            textAlign=\"center\"\n            sx={{ maxWidth: 300 }}\n          >\n            {message}\n          </Typography>\n        )}\n\n        {showProgress && variant === 'circular' && (\n          <Typography variant=\"caption\" color=\"text.secondary\">\n            {Math.round(progress)}% completado\n          </Typography>\n        )}\n\n        {elapsedTime > 3000 && (\n          <Typography \n            variant=\"caption\" \n            color=\"text.secondary\"\n            sx={{ opacity: 0.7 }}\n          >\n            Tiempo transcurrido: {formatElapsedTime(elapsedTime)}\n          </Typography>\n        )}\n\n        {showTimeoutMessage && (\n          <Fade in={true}>\n            <Box \n              sx={{ \n                textAlign: 'center',\n                p: 2,\n                backgroundColor: 'warning.light',\n                borderRadius: 1,\n                maxWidth: 300\n              }}\n            >\n              <WifiIcon sx={{ color: 'warning.dark', mb: 1 }} />\n              <Typography variant=\"caption\" color=\"warning.dark\" display=\"block\">\n                La operación está tardando más de lo esperado.\n              </Typography>\n              <Typography variant=\"caption\" color=\"warning.dark\" display=\"block\">\n                Verifica tu conexión a internet.\n              </Typography>\n            </Box>\n          </Fade>\n        )}\n      </Box>\n    </Fade>\n  );\n\n  if (overlay) {\n    return (\n      <Backdrop\n        sx={{ \n          color: '#fff', \n          zIndex: (theme) => theme.zIndex.drawer + 1,\n          backgroundColor: 'rgba(0, 0, 0, 0.5)',\n          backdropFilter: 'blur(2px)'\n        }}\n        open={true}\n      >\n        {spinnerContent}\n      </Backdrop>\n    );\n  }\n\n  return (\n    <Box\n      display=\"flex\"\n      justifyContent=\"center\"\n      alignItems=\"center\"\n      minHeight=\"200px\"\n      width=\"100%\"\n    >\n      {spinnerContent}\n    </Box>\n  );\n};\n\nexport default LoadingSpinner;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OACEC,GAAG,CACHC,gBAAgB,CAChBC,UAAU,CACVC,QAAQ,CACRC,cAAc,CACdC,IAAI,CACJC,SAAS,KACJ,eAAe,CACtB,OAASC,IAAI,GAAI,CAAAC,QAAQ,KAAQ,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAcvD,KAAM,CAAAC,cAAc,CAAGP,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAQ,aAAa,CAAGR,SAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAS,cAA6C,CAAGC,IAAA,EAUhD,IAViD,CACrDC,OAAO,CAAG,aAAa,CACvBC,IAAI,CAAG,EAAE,CACTC,OAAO,CAAG,KAAK,CACfC,KAAK,CAAG,SAAS,CACjBC,OAAO,CAAG,UAAU,CACpBC,YAAY,CAAG,KAAK,CACpBC,QAAQ,CAAG,CAAC,CACZC,OAAO,CAAG,KAAK,CAAE;AACjBC,SACF,CAAC,CAAAT,IAAA,CACC,KAAM,CAACU,kBAAkB,CAAEC,qBAAqB,CAAC,CAAG7B,QAAQ,CAAC,KAAK,CAAC,CACnE,KAAM,CAAC8B,WAAW,CAAEC,cAAc,CAAC,CAAG/B,QAAQ,CAAC,CAAC,CAAC,CAEjDC,SAAS,CAAC,IAAM,CACd,KAAM,CAAA+B,SAAS,CAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAE5B,KAAM,CAAAC,KAAK,CAAGC,WAAW,CAAC,IAAM,CAC9B,KAAM,CAAAC,OAAO,CAAGJ,IAAI,CAACC,GAAG,CAAC,CAAC,CAAGF,SAAS,CACtCD,cAAc,CAACM,OAAO,CAAC,CAEvB,GAAIA,OAAO,EAAIX,OAAO,CAAE,CACtBG,qBAAqB,CAAC,IAAI,CAAC,CAC3B,GAAIF,SAAS,CAAE,CACbA,SAAS,CAAC,CAAC,CACb,CACF,CACF,CAAC,CAAE,IAAI,CAAC,CAER,MAAO,IAAMW,aAAa,CAACH,KAAK,CAAC,CACnC,CAAC,CAAE,CAACT,OAAO,CAAEC,SAAS,CAAC,CAAC,CAExB,KAAM,CAAAY,iBAAiB,CAAIC,EAAU,EAAa,CAChD,KAAM,CAAAC,OAAO,CAAGC,IAAI,CAACC,KAAK,CAACH,EAAE,CAAG,IAAI,CAAC,CACrC,GAAIC,OAAO,CAAG,EAAE,CAAE,MAAO,GAAGA,OAAO,GAAG,CACtC,KAAM,CAAAG,OAAO,CAAGF,IAAI,CAACC,KAAK,CAACF,OAAO,CAAG,EAAE,CAAC,CACxC,MAAO,GAAGG,OAAO,KAAKH,OAAO,CAAG,EAAE,GAAG,CACvC,CAAC,CAED,KAAM,CAAAI,aAAa,CAAGA,CAAA,GAAM,CAC1B,OAAQtB,OAAO,EACb,IAAK,QAAQ,CACX,mBACET,KAAA,CAACZ,GAAG,EAAC4C,EAAE,CAAE,CAAEC,KAAK,CAAE,MAAM,CAAEC,QAAQ,CAAE,GAAI,CAAE,CAAAC,QAAA,eACxCrC,IAAA,CAACN,cAAc,EACbgB,KAAK,CAAEA,KAAM,CACbC,OAAO,CAAEC,YAAY,CAAG,aAAa,CAAG,eAAgB,CACxD0B,KAAK,CAAE1B,YAAY,CAAGC,QAAQ,CAAG0B,SAAU,CAC3CL,EAAE,CAAE,CAAEM,MAAM,CAAE,CAAC,CAAEC,YAAY,CAAE,CAAE,CAAE,CACpC,CAAC,CACD7B,YAAY,eACXV,KAAA,CAACV,UAAU,EAACmB,OAAO,CAAC,SAAS,CAACD,KAAK,CAAC,gBAAgB,CAACwB,EAAE,CAAE,CAAEQ,EAAE,CAAE,CAAC,CAAEC,SAAS,CAAE,QAAQ,CAAEC,OAAO,CAAE,OAAQ,CAAE,CAAAP,QAAA,EACvGP,IAAI,CAACe,KAAK,CAAChC,QAAQ,CAAC,CAAC,GACxB,EAAY,CACb,EACE,CAAC,CAGV,IAAK,MAAM,CACT,mBACEb,IAAA,CAACR,UAAU,EACTmB,OAAO,CAAC,IAAI,CACZuB,EAAE,CAAE,CACFY,UAAU,CAAE,WAAW,CACvBC,SAAS,CAAE,GAAG3C,aAAa,4BAA4B,CACvDM,KAAK,CAAEA,KAAK,GAAK,SAAS,CAAG,cAAc,CAAGA,KAAK,GAAK,WAAW,CAAG,gBAAgB,CAAG,SAC3F,CAAE,CAAA2B,QAAA,CACH,oBAED,CAAY,CAAC,CAGjB,QACE,mBACErC,IAAA,CAACT,gBAAgB,EACfiB,IAAI,CAAEA,IAAK,CACXE,KAAK,CAAEA,KAAM,CACbC,OAAO,CAAEC,YAAY,CAAG,aAAa,CAAG,eAAgB,CACxD0B,KAAK,CAAE1B,YAAY,CAAGC,QAAQ,CAAG0B,SAAU,CAC3CL,EAAE,CAAE,CACFa,SAAS,CAAE/B,kBAAkB,CAAG,GAAGb,cAAc,cAAc,CAAGoC,SACpE,CAAE,CACH,CAAC,CAER,CACF,CAAC,CAED,KAAM,CAAAS,cAAc,cAClBhD,IAAA,CAACL,IAAI,EAACsD,EAAE,CAAE,IAAK,CAACnC,OAAO,CAAE,GAAI,CAAAuB,QAAA,cAC3BnC,KAAA,CAACZ,GAAG,EACFsD,OAAO,CAAC,MAAM,CACdM,aAAa,CAAC,QAAQ,CACtBC,UAAU,CAAC,QAAQ,CACnBC,cAAc,CAAC,QAAQ,CACvBC,GAAG,CAAE,CAAE,CACPC,CAAC,CAAE,CAAE,CACLpB,EAAE,CAAE,CACFqB,QAAQ,CAAE5C,OAAO,GAAK,QAAQ,CAAG,GAAG,CAAG,MACzC,CAAE,CAAA0B,QAAA,EAEDJ,aAAa,CAAC,CAAC,CAEf1B,OAAO,eACNP,IAAA,CAACR,UAAU,EACTmB,OAAO,CAAC,OAAO,CACfD,KAAK,CAAC,gBAAgB,CACtBiC,SAAS,CAAC,QAAQ,CAClBT,EAAE,CAAE,CAAEE,QAAQ,CAAE,GAAI,CAAE,CAAAC,QAAA,CAErB9B,OAAO,CACE,CACb,CAEAK,YAAY,EAAID,OAAO,GAAK,UAAU,eACrCT,KAAA,CAACV,UAAU,EAACmB,OAAO,CAAC,SAAS,CAACD,KAAK,CAAC,gBAAgB,CAAA2B,QAAA,EACjDP,IAAI,CAACe,KAAK,CAAChC,QAAQ,CAAC,CAAC,cACxB,EAAY,CACb,CAEAK,WAAW,CAAG,IAAI,eACjBhB,KAAA,CAACV,UAAU,EACTmB,OAAO,CAAC,SAAS,CACjBD,KAAK,CAAC,gBAAgB,CACtBwB,EAAE,CAAE,CAAEsB,OAAO,CAAE,GAAI,CAAE,CAAAnB,QAAA,EACtB,uBACsB,CAACV,iBAAiB,CAACT,WAAW,CAAC,EAC1C,CACb,CAEAF,kBAAkB,eACjBhB,IAAA,CAACL,IAAI,EAACsD,EAAE,CAAE,IAAK,CAAAZ,QAAA,cACbnC,KAAA,CAACZ,GAAG,EACF4C,EAAE,CAAE,CACFS,SAAS,CAAE,QAAQ,CACnBW,CAAC,CAAE,CAAC,CACJG,eAAe,CAAE,eAAe,CAChChB,YAAY,CAAE,CAAC,CACfL,QAAQ,CAAE,GACZ,CAAE,CAAAC,QAAA,eAEFrC,IAAA,CAACF,QAAQ,EAACoC,EAAE,CAAE,CAAExB,KAAK,CAAE,cAAc,CAAEgD,EAAE,CAAE,CAAE,CAAE,CAAE,CAAC,cAClD1D,IAAA,CAACR,UAAU,EAACmB,OAAO,CAAC,SAAS,CAACD,KAAK,CAAC,cAAc,CAACkC,OAAO,CAAC,OAAO,CAAAP,QAAA,CAAC,yDAEnE,CAAY,CAAC,cACbrC,IAAA,CAACR,UAAU,EAACmB,OAAO,CAAC,SAAS,CAACD,KAAK,CAAC,cAAc,CAACkC,OAAO,CAAC,OAAO,CAAAP,QAAA,CAAC,qCAEnE,CAAY,CAAC,EACV,CAAC,CACF,CACP,EACE,CAAC,CACF,CACP,CAED,GAAI5B,OAAO,CAAE,CACX,mBACET,IAAA,CAACP,QAAQ,EACPyC,EAAE,CAAE,CACFxB,KAAK,CAAE,MAAM,CACbiD,MAAM,CAAGC,KAAK,EAAKA,KAAK,CAACD,MAAM,CAACE,MAAM,CAAG,CAAC,CAC1CJ,eAAe,CAAE,oBAAoB,CACrCK,cAAc,CAAE,WAClB,CAAE,CACFC,IAAI,CAAE,IAAK,CAAA1B,QAAA,CAEVW,cAAc,CACP,CAAC,CAEf,CAEA,mBACEhD,IAAA,CAACV,GAAG,EACFsD,OAAO,CAAC,MAAM,CACdQ,cAAc,CAAC,QAAQ,CACvBD,UAAU,CAAC,QAAQ,CACnBa,SAAS,CAAC,OAAO,CACjB7B,KAAK,CAAC,MAAM,CAAAE,QAAA,CAEXW,cAAc,CACZ,CAAC,CAEV,CAAC,CAED,cAAe,CAAA3C,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}