{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,Card,CardContent,Typography,Grid,Chip,Paper,Divider,useTheme,useMediaQuery}from'@mui/material';import{Person as PersonIcon,LocationOn as LocationIcon}from'@mui/icons-material';import{studentApi}from'../services/api';import LoadingSpinner from'./LoadingSpinner';import ErrorMessage from'./ErrorMessage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StudentList=_ref=>{let{refreshTrigger=0}=_ref;const[students,setStudents]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const theme=useTheme();const isMobile=useMediaQuery(theme.breakpoints.down('sm'));const fetchStudents=async()=>{try{setLoading(true);setError(null);const data=await studentApi.getPublicStudents();setStudents(data);}catch(err){const apiError=err;setError(apiError.message||'Error al cargar la lista de estudiantes');}finally{setLoading(false);}};useEffect(()=>{fetchStudents();},[refreshTrigger]);const handleRetry=()=>{fetchStudents();};if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{message:\"Cargando lista de estudiantes...\",size:50});}if(error){return/*#__PURE__*/_jsx(ErrorMessage,{message:error,title:\"Error al cargar estudiantes\",onRetry:handleRetry,retryText:\"Recargar lista\"});}if(students.length===0){return/*#__PURE__*/_jsxs(Paper,{elevation:1,sx:{p:4,textAlign:'center',backgroundColor:theme.palette.grey[50]},children:[/*#__PURE__*/_jsx(PersonIcon,{sx:{fontSize:64,color:theme.palette.grey[400],mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"text.secondary\",gutterBottom:true,children:\"No hay estudiantes registrados\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"S\\xE9 el primero en registrarte a un curso\"})]});}return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{sx:{mb:3,textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h2\",gutterBottom:true,children:\"Estudiantes Registrados\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[students.length,\" \",students.length===1?'estudiante registrado':'estudiantes registrados']}),/*#__PURE__*/_jsx(Divider,{sx:{mt:2}})]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:isMobile?2:3,children:students.map(student=>/*#__PURE__*/_jsx(Grid,{size:{xs:12,sm:6,md:4},children:/*#__PURE__*/_jsx(Card,{elevation:2,sx:{height:'100%',transition:'all 0.3s ease-in-out','&:hover':{elevation:4,transform:'translateY(-2px)'}},children:/*#__PURE__*/_jsxs(CardContent,{sx:{p:3},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:1,mb:2,children:[/*#__PURE__*/_jsx(PersonIcon,{color:\"primary\",sx:{fontSize:24}}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",component:\"h3\",sx:{fontWeight:600,lineHeight:1.2,wordBreak:'break-word'},children:[student.nombre,\" \",student.apellido]})]}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:1,mt:1,children:[/*#__PURE__*/_jsx(LocationIcon,{color:\"action\",sx:{fontSize:20}}),/*#__PURE__*/_jsx(Chip,{label:student.ciudad,size:\"small\",variant:\"outlined\",color:\"primary\",sx:{fontWeight:500,'& .MuiChip-label':{px:1.5}}})]})]})})},student.id))}),/*#__PURE__*/_jsx(Box,{sx:{mt:4,p:2,backgroundColor:theme.palette.primary.main,color:'white',borderRadius:1,textAlign:'center'},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"\\xA1\\xDAnete a nuestra comunidad de aprendizaje!\",students.length>0&&` Ya somos ${students.length} estudiantes.`]})})]});};export default StudentList;","map":{"version":3,"names":["React","useState","useEffect","Box","Card","CardContent","Typography","Grid","Chip","Paper","Divider","useTheme","useMediaQuery","Person","PersonIcon","LocationOn","LocationIcon","studentApi","LoadingSpinner","ErrorMessage","jsx","_jsx","jsxs","_jsxs","StudentList","_ref","refreshTrigger","students","setStudents","loading","setLoading","error","setError","theme","isMobile","breakpoints","down","fetchStudents","data","getPublicStudents","err","apiError","message","handleRetry","size","title","onRetry","retryText","length","elevation","sx","p","textAlign","backgroundColor","palette","grey","children","fontSize","color","mb","variant","gutterBottom","component","mt","container","spacing","map","student","xs","sm","md","height","transition","transform","display","alignItems","gap","fontWeight","lineHeight","wordBreak","nombre","apellido","label","ciudad","px","id","primary","main","borderRadius"],"sources":["/home/joserodriguez/educonnect/frontend/src/components/StudentList.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  Chip,\n  Paper,\n  Divider,\n  useTheme,\n  useMediaQuery,\n} from '@mui/material';\nimport {\n  Person as PersonIcon,\n  LocationOn as LocationIcon,\n} from '@mui/icons-material';\nimport { studentApi, PublicStudent, ApiError } from '../services/api';\nimport LoadingSpinner from './LoadingSpinner';\nimport ErrorMessage from './ErrorMessage';\n\ninterface StudentListProps {\n  refreshTrigger?: number; // Used to trigger refresh after new registration\n}\n\nconst StudentList: React.FC<StudentListProps> = ({ refreshTrigger = 0 }) => {\n  const [students, setStudents] = useState<PublicStudent[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  const fetchStudents = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await studentApi.getPublicStudents();\n      setStudents(data);\n    } catch (err) {\n      const apiError = err as ApiError;\n      setError(apiError.message || 'Error al cargar la lista de estudiantes');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchStudents();\n  }, [refreshTrigger]);\n\n  const handleRetry = () => {\n    fetchStudents();\n  };\n\n  if (loading) {\n    return (\n      <LoadingSpinner \n        message=\"Cargando lista de estudiantes...\" \n        size={50}\n      />\n    );\n  }\n\n  if (error) {\n    return (\n      <ErrorMessage\n        message={error}\n        title=\"Error al cargar estudiantes\"\n        onRetry={handleRetry}\n        retryText=\"Recargar lista\"\n      />\n    );\n  }\n\n  if (students.length === 0) {\n    return (\n      <Paper \n        elevation={1} \n        sx={{ \n          p: 4, \n          textAlign: 'center',\n          backgroundColor: theme.palette.grey[50]\n        }}\n      >\n        <PersonIcon \n          sx={{ \n            fontSize: 64, \n            color: theme.palette.grey[400],\n            mb: 2 \n          }} \n        />\n        <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\n          No hay estudiantes registrados\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Sé el primero en registrarte a un curso\n        </Typography>\n      </Paper>\n    );\n  }\n\n  return (\n    <Box>\n      <Box sx={{ mb: 3, textAlign: 'center' }}>\n        <Typography variant=\"h5\" component=\"h2\" gutterBottom>\n          Estudiantes Registrados\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          {students.length} {students.length === 1 ? 'estudiante registrado' : 'estudiantes registrados'}\n        </Typography>\n        <Divider sx={{ mt: 2 }} />\n      </Box>\n\n      <Grid container spacing={isMobile ? 2 : 3}>\n        {students.map((student) => (\n          <Grid size={{ xs: 12, sm: 6, md: 4 }} key={student.id}>\n            <Card \n              elevation={2}\n              sx={{\n                height: '100%',\n                transition: 'all 0.3s ease-in-out',\n                '&:hover': {\n                  elevation: 4,\n                  transform: 'translateY(-2px)',\n                },\n              }}\n            >\n              <CardContent sx={{ p: 3 }}>\n                <Box \n                  display=\"flex\" \n                  alignItems=\"center\" \n                  gap={1} \n                  mb={2}\n                >\n                  <PersonIcon \n                    color=\"primary\" \n                    sx={{ fontSize: 24 }} \n                  />\n                  <Typography \n                    variant=\"h6\" \n                    component=\"h3\"\n                    sx={{ \n                      fontWeight: 600,\n                      lineHeight: 1.2,\n                      wordBreak: 'break-word'\n                    }}\n                  >\n                    {student.nombre} {student.apellido}\n                  </Typography>\n                </Box>\n                \n                <Box \n                  display=\"flex\" \n                  alignItems=\"center\" \n                  gap={1}\n                  mt={1}\n                >\n                  <LocationIcon \n                    color=\"action\" \n                    sx={{ fontSize: 20 }} \n                  />\n                  <Chip\n                    label={student.ciudad}\n                    size=\"small\"\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    sx={{\n                      fontWeight: 500,\n                      '& .MuiChip-label': {\n                        px: 1.5\n                      }\n                    }}\n                  />\n                </Box>\n              </CardContent>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n\n      {/* Summary footer */}\n      <Box \n        sx={{ \n          mt: 4, \n          p: 2, \n          backgroundColor: theme.palette.primary.main,\n          color: 'white',\n          borderRadius: 1,\n          textAlign: 'center'\n        }}\n      >\n        <Typography variant=\"body2\">\n          ¡Únete a nuestra comunidad de aprendizaje! \n          {students.length > 0 && ` Ya somos ${students.length} estudiantes.`}\n        </Typography>\n      </Box>\n    </Box>\n  );\n};\n\nexport default StudentList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}