{"ast":null,"code":"var _jsxFileName = \"/home/joserodriguez/educonnect/frontend/src/contexts/AuthContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect, useCallback, useMemo } from 'react';\nimport { authApi } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(undefined);\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [authState, setAuthState] = useState({\n    isAuthenticated: false,\n    isLoading: true,\n    error: null\n  });\n  const checkAuthStatus = useCallback(async () => {\n    try {\n      const isAuthenticated = await authApi.checkAuthStatus();\n      setAuthState(prev => ({\n        ...prev,\n        isAuthenticated,\n        isLoading: false,\n        error: null\n      }));\n    } catch (error) {\n      // Log unexpected errors (401s are handled silently in checkAuthStatus)\n      console.warn('Unexpected error checking auth status:', error);\n      setAuthState(prev => ({\n        ...prev,\n        isAuthenticated: false,\n        isLoading: false,\n        error: null\n      }));\n    }\n  }, []);\n\n  // Check authentication status on mount\n  useEffect(() => {\n    checkAuthStatus();\n  }, [checkAuthStatus]);\n  const login = useCallback(async (email, password) => {\n    setAuthState(prev => ({\n      ...prev,\n      isLoading: true,\n      error: null\n    }));\n    try {\n      await authApi.login({\n        email,\n        password\n      });\n      setAuthState(prev => ({\n        ...prev,\n        isAuthenticated: true,\n        isLoading: false,\n        error: null\n      }));\n    } catch (error) {\n      const apiError = error;\n      setAuthState(prev => ({\n        ...prev,\n        isAuthenticated: false,\n        isLoading: false,\n        error: apiError.status === 401 ? 'Credenciales incorrectas. Verifica tu correo y contrase침a.' : apiError.message || 'Error al iniciar sesi칩n. Intenta nuevamente.'\n      }));\n      throw error; // Re-throw to allow component-level handling\n    }\n  }, []);\n  const logout = useCallback(async () => {\n    setAuthState(prev => ({\n      ...prev,\n      isLoading: true,\n      error: null\n    }));\n    try {\n      await authApi.logout();\n    } catch (error) {\n      // Even if logout fails on server, clear local state\n      console.warn('Logout request failed:', error);\n    } finally {\n      setAuthState({\n        isAuthenticated: false,\n        isLoading: false,\n        error: null\n      });\n    }\n  }, []);\n  const clearError = useCallback(() => {\n    setAuthState(prev => ({\n      ...prev,\n      error: null\n    }));\n  }, []);\n  const contextValue = useMemo(() => ({\n    ...authState,\n    login,\n    logout,\n    clearError\n  }), [authState, login, logout, clearError]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: contextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"zoCHfWBI02j8MQlQJTsSQNidCag=\");\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n_s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useCallback","useMemo","authApi","jsxDEV","_jsxDEV","AuthContext","undefined","AuthProvider","children","_s","authState","setAuthState","isAuthenticated","isLoading","error","checkAuthStatus","prev","console","warn","login","email","password","apiError","status","message","logout","clearError","contextValue","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","context","Error","$RefreshReg$"],"sources":["/home/joserodriguez/educonnect/frontend/src/contexts/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode, useCallback, useMemo } from 'react';\nimport { authApi, ApiError } from '../services/api';\n\ninterface AuthState {\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  error: string | null;\n}\n\ninterface AuthContextType extends AuthState {\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => Promise<void>;\n  clearError: () => void;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\n  const [authState, setAuthState] = useState<AuthState>({\n    isAuthenticated: false,\n    isLoading: true,\n    error: null,\n  });\n\n  const checkAuthStatus = useCallback(async () => {\n    try {\n      const isAuthenticated = await authApi.checkAuthStatus();\n      setAuthState(prev => ({\n        ...prev,\n        isAuthenticated,\n        isLoading: false,\n        error: null,\n      }));\n    } catch (error) {\n      // Log unexpected errors (401s are handled silently in checkAuthStatus)\n      console.warn('Unexpected error checking auth status:', error);\n\n      setAuthState(prev => ({\n        ...prev,\n        isAuthenticated: false,\n        isLoading: false,\n        error: null,\n      }));\n    }\n  }, []);\n\n  // Check authentication status on mount\n  useEffect(() => {\n    checkAuthStatus();\n  }, [checkAuthStatus]);\n\n  const login = useCallback(async (email: string, password: string): Promise<void> => {\n    setAuthState(prev => ({\n      ...prev,\n      isLoading: true,\n      error: null,\n    }));\n\n    try {\n      await authApi.login({ email, password });\n      setAuthState(prev => ({\n        ...prev,\n        isAuthenticated: true,\n        isLoading: false,\n        error: null,\n      }));\n    } catch (error) {\n      const apiError = error as ApiError;\n      setAuthState(prev => ({\n        ...prev,\n        isAuthenticated: false,\n        isLoading: false,\n        error: apiError.status === 401\n          ? 'Credenciales incorrectas. Verifica tu correo y contrase침a.'\n          : apiError.message || 'Error al iniciar sesi칩n. Intenta nuevamente.',\n      }));\n      throw error; // Re-throw to allow component-level handling\n    }\n  }, []);\n\n  const logout = useCallback(async (): Promise<void> => {\n    setAuthState(prev => ({\n      ...prev,\n      isLoading: true,\n      error: null,\n    }));\n\n    try {\n      await authApi.logout();\n    } catch (error) {\n      // Even if logout fails on server, clear local state\n      console.warn('Logout request failed:', error);\n    } finally {\n      setAuthState({\n        isAuthenticated: false,\n        isLoading: false,\n        error: null,\n      });\n    }\n  }, []);\n\n  const clearError = useCallback(() => {\n    setAuthState(prev => ({\n      ...prev,\n      error: null,\n    }));\n  }, []);\n\n  const contextValue: AuthContextType = useMemo(() => ({\n    ...authState,\n    login,\n    logout,\n    clearError,\n  }), [authState, login, logout, clearError]);\n\n  return (\n    <AuthContext.Provider value={contextValue}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = (): AuthContextType => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}