{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from 'react';\nexport const useNetworkStatus = () => {\n  _s();\n  const [networkStatus, setNetworkStatus] = useState({\n    isOnline: navigator.onLine,\n    isSlowConnection: false,\n    connectionType: 'unknown'\n  });\n  const [lastOnlineTime, setLastOnlineTime] = useState(navigator.onLine ? new Date() : null);\n  const [offlineDuration, setOfflineDuration] = useState(0);\n\n  // Get connection information if available\n  const getConnectionInfo = useCallback(() => {\n    // @ts-ignore - NetworkInformation is not fully supported in TypeScript\n    const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\n    if (connection) {\n      return {\n        connectionType: connection.type || connection.effectiveType || 'unknown',\n        downlink: connection.downlink,\n        effectiveType: connection.effectiveType,\n        isSlowConnection: connection.effectiveType === 'slow-2g' || connection.effectiveType === '2g' || connection.downlink && connection.downlink < 0.5\n      };\n    }\n    return {\n      connectionType: 'unknown',\n      isSlowConnection: false\n    };\n  }, []);\n\n  // Update network status\n  const updateNetworkStatus = useCallback(() => {\n    const isOnline = navigator.onLine;\n    const connectionInfo = getConnectionInfo();\n    setNetworkStatus(prev => ({\n      ...prev,\n      isOnline,\n      ...connectionInfo\n    }));\n    if (isOnline) {\n      setLastOnlineTime(new Date());\n      setOfflineDuration(0);\n    } else if (lastOnlineTime) {\n      const duration = Math.floor((Date.now() - lastOnlineTime.getTime()) / 1000);\n      setOfflineDuration(duration);\n    }\n  }, [getConnectionInfo, lastOnlineTime]);\n\n  // Retry connection by attempting a simple fetch\n  const retryConnection = useCallback(async () => {\n    try {\n      // Try to fetch a small resource to test connectivity\n      const response = await fetch('/favicon.ico', {\n        method: 'HEAD',\n        cache: 'no-cache'\n      });\n      if (response.ok) {\n        updateNetworkStatus();\n      }\n    } catch (error) {\n      // Connection still not available\n      console.warn('Connection retry failed:', error);\n    }\n  }, [updateNetworkStatus]);\n  useEffect(() => {\n    // Initial setup\n    updateNetworkStatus();\n\n    // Event listeners for online/offline events\n    const handleOnline = () => {\n      updateNetworkStatus();\n    };\n    const handleOffline = () => {\n      updateNetworkStatus();\n    };\n\n    // Connection change listener (if supported)\n    const handleConnectionChange = () => {\n      updateNetworkStatus();\n    };\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    // @ts-ignore - NetworkInformation is not fully supported in TypeScript\n    const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\n    if (connection) {\n      connection.addEventListener('change', handleConnectionChange);\n    }\n\n    // Update offline duration every second when offline\n    const interval = setInterval(() => {\n      if (!navigator.onLine && lastOnlineTime) {\n        const duration = Math.floor((Date.now() - lastOnlineTime.getTime()) / 1000);\n        setOfflineDuration(duration);\n      }\n    }, 1000);\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n      if (connection) {\n        connection.removeEventListener('change', handleConnectionChange);\n      }\n      clearInterval(interval);\n    };\n  }, [updateNetworkStatus, lastOnlineTime]);\n  return {\n    ...networkStatus,\n    retryConnection,\n    lastOnlineTime,\n    offlineDuration\n  };\n};\n_s(useNetworkStatus, \"y+te/SaTL2Jp2H/TO+6nSPlBiDU=\");","map":{"version":3,"names":["useState","useEffect","useCallback","useNetworkStatus","_s","networkStatus","setNetworkStatus","isOnline","navigator","onLine","isSlowConnection","connectionType","lastOnlineTime","setLastOnlineTime","Date","offlineDuration","setOfflineDuration","getConnectionInfo","connection","mozConnection","webkitConnection","type","effectiveType","downlink","updateNetworkStatus","connectionInfo","prev","duration","Math","floor","now","getTime","retryConnection","response","fetch","method","cache","ok","error","console","warn","handleOnline","handleOffline","handleConnectionChange","window","addEventListener","interval","setInterval","removeEventListener","clearInterval"],"sources":["/home/joserodriguez/educonnect/frontend/src/hooks/useNetworkStatus.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\n\ninterface NetworkStatus {\n  isOnline: boolean;\n  isSlowConnection: boolean;\n  connectionType: string;\n  downlink?: number;\n  effectiveType?: string;\n}\n\ninterface UseNetworkStatusReturn extends NetworkStatus {\n  retryConnection: () => void;\n  lastOnlineTime: Date | null;\n  offlineDuration: number; // in seconds\n}\n\nexport const useNetworkStatus = (): UseNetworkStatusReturn => {\n  const [networkStatus, setNetworkStatus] = useState<NetworkStatus>({\n    isOnline: navigator.onLine,\n    isSlowConnection: false,\n    connectionType: 'unknown',\n  });\n  \n  const [lastOnlineTime, setLastOnlineTime] = useState<Date | null>(\n    navigator.onLine ? new Date() : null\n  );\n  \n  const [offlineDuration, setOfflineDuration] = useState(0);\n\n  // Get connection information if available\n  const getConnectionInfo = useCallback((): Partial<NetworkStatus> => {\n    // @ts-ignore - NetworkInformation is not fully supported in TypeScript\n    const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\n    \n    if (connection) {\n      return {\n        connectionType: connection.type || connection.effectiveType || 'unknown',\n        downlink: connection.downlink,\n        effectiveType: connection.effectiveType,\n        isSlowConnection: connection.effectiveType === 'slow-2g' || \n                         connection.effectiveType === '2g' ||\n                         (connection.downlink && connection.downlink < 0.5),\n      };\n    }\n    \n    return {\n      connectionType: 'unknown',\n      isSlowConnection: false,\n    };\n  }, []);\n\n  // Update network status\n  const updateNetworkStatus = useCallback(() => {\n    const isOnline = navigator.onLine;\n    const connectionInfo = getConnectionInfo();\n    \n    setNetworkStatus(prev => ({\n      ...prev,\n      isOnline,\n      ...connectionInfo,\n    }));\n\n    if (isOnline) {\n      setLastOnlineTime(new Date());\n      setOfflineDuration(0);\n    } else if (lastOnlineTime) {\n      const duration = Math.floor((Date.now() - lastOnlineTime.getTime()) / 1000);\n      setOfflineDuration(duration);\n    }\n  }, [getConnectionInfo, lastOnlineTime]);\n\n  // Retry connection by attempting a simple fetch\n  const retryConnection = useCallback(async () => {\n    try {\n      // Try to fetch a small resource to test connectivity\n      const response = await fetch('/favicon.ico', {\n        method: 'HEAD',\n        cache: 'no-cache',\n      });\n      \n      if (response.ok) {\n        updateNetworkStatus();\n      }\n    } catch (error) {\n      // Connection still not available\n      console.warn('Connection retry failed:', error);\n    }\n  }, [updateNetworkStatus]);\n\n  useEffect(() => {\n    // Initial setup\n    updateNetworkStatus();\n\n    // Event listeners for online/offline events\n    const handleOnline = () => {\n      updateNetworkStatus();\n    };\n\n    const handleOffline = () => {\n      updateNetworkStatus();\n    };\n\n    // Connection change listener (if supported)\n    const handleConnectionChange = () => {\n      updateNetworkStatus();\n    };\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    // @ts-ignore - NetworkInformation is not fully supported in TypeScript\n    const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\n    if (connection) {\n      connection.addEventListener('change', handleConnectionChange);\n    }\n\n    // Update offline duration every second when offline\n    const interval = setInterval(() => {\n      if (!navigator.onLine && lastOnlineTime) {\n        const duration = Math.floor((Date.now() - lastOnlineTime.getTime()) / 1000);\n        setOfflineDuration(duration);\n      }\n    }, 1000);\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n      \n      if (connection) {\n        connection.removeEventListener('change', handleConnectionChange);\n      }\n      \n      clearInterval(interval);\n    };\n  }, [updateNetworkStatus, lastOnlineTime]);\n\n  return {\n    ...networkStatus,\n    retryConnection,\n    lastOnlineTime,\n    offlineDuration,\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}